(this["webpackJsonptaha-market"]=this["webpackJsonptaha-market"]||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(27),s=n.n(c),i=n(12),o=n(14),l=n(26),j="OPEN_CART",d="CLOSE_CART",u="SET_PRODUCTS",b="ADD_TO_CART",m="REMOVE_FROM_CART",O=function(e){return{type:b,payload:e}},h=function(e){return{type:u,payload:e}},p=n(3),x=n.n(p),f=n(8),v=function(){return localStorage.getItem("token")},g=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,fetch("https://api.edu.etherial.dev/api/ecommerce/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,a,c,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firstname,r=t.lastname,a=t.email,c=t.password,e.next=3,fetch("https://api.edu.etherial.dev/api/ecommerce/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:n,lastname:r,email:a,password:c,password_verif:c})});case 3:return s=e.sent,e.next=6,s.json();case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.edu.etherial.dev/api/ecommerce/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=n(1),k=function(){var e=v();return console.log(e),void 0!==e&&null!==e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(o.b,{className:"link",to:"/Orders",children:"Orders"}),Object(w.jsx)(o.b,{className:"link",to:"/Logout",children:"Logout"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{className:"announcement",children:"Petit bug il faut refresh manuellement pour afficher la navbar apres le login"}),Object(w.jsx)(o.b,{className:"link",to:"/Login",children:"Login"}),Object(w.jsx)(o.b,{className:"link",to:"/Register",children:"Register"})]})},S=function(){var e=Object(i.c)((function(e){return e.cart})),t=Object(i.b)(),n=function(){return e.reduce((function(e,t){return e+t.quantity}),0)};return Object(w.jsx)("div",{style:{background:"black"},children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(o.b,{to:"/",children:Object(w.jsx)("div",{style:{fontSize:"6rem",color:"white"},children:"Taha's Market"})}),Object(w.jsxs)("nav",{children:[Object(w.jsx)(k,{}),Object(w.jsxs)("div",{className:"btnContainer",onClick:function(){return t({type:j})},children:[Object(w.jsx)("button",{style:{color:"white",background:"black"},children:Object(w.jsx)(l.c,{})}),n()>0?Object(w.jsx)("div",{className:"quantity",children:n()}):""]})]})]})})},q=n(24),C=n(25),T=n(4),E=n(57),_=function(e){var t=e.id,n=e.name,r=e.price,a=e.picture,c={id:t,name:n,price:r,picture:a,category:e.category},s=Object(i.b)();return Object(w.jsxs)("div",{className:"prodwrap",children:[Object(w.jsx)("div",{className:"imgcon",children:Object(w.jsx)("img",{className:"productimg",src:a,alt:n})}),Object(w.jsxs)("div",{className:"details2",children:[Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"total",children:n}),Object(w.jsxs)("div",{children:["$",r.toFixed(2)]})]}),Object(w.jsx)("button",{className:"closebtn",onClick:function(){return s(O(c))},children:"Add To Cart"})]})]})},F=function(){var e=Object(i.c)((function(e){return e.products})),t=Object(i.b)();Object(r.useEffect)((function(){n()}),[]);var n=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=h,e.next=4,a();case 4:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.edu.etherial.dev/api/ecommerce/products");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=e.map((function(e){return Object(w.jsx)(_,{id:e.id,name:e.name,price:e.price,picture:e.picture},Object(E.a)())}));return Object(w.jsx)("div",{className:"prodswrap",children:c})},L=n(33),I=n(34),A=n(40),R=n(39),P=n(11),D=function(){var e=Object(r.useState)(""),t=Object(P.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("h1",{className:"name",children:[n.firstname,"'s orders"]})})},B=function(e){Object(A.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,orders:[]},e}return Object(I.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.edu.etherial.dev/api/ecommerce/users/me/orders",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({orders:n.data,loading:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(w.jsx)("div",{children:"loading..."}):this.state.orders?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(D,{}),Object(w.jsxs)("table",{id:"customers",children:[Object(w.jsx)("br",{}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Id"}),Object(w.jsx)("th",{children:"Ordered At"}),Object(w.jsx)("th",{children:"Delivery Date"})]}),this.state.orders.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.id}),Object(w.jsx)("td",{children:e.createdAt}),Object(w.jsx)("td",{children:e.delivery_date})]},e.id)}))]})]}):Object(w.jsx)("div",{children:"No orders"})}}]),n}(a.a.Component),M=n(2),G=n(28),z=n(55),J=n(56),V=n(58);function $(){var e=Object(T.h)(),t=Object(G.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;return Object(w.jsx)(z.a,{className:"",children:Object(w.jsxs)(J.a,{onSubmit:r(function(){var t=Object(f.a)(x.a.mark((function t(n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(n);case 2:r=t.sent,localStorage.setItem("token",r.data.token),e("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),children:[Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(J.a.Group,{className:"mb-3",controlId:"formBasicFirstName",children:[Object(w.jsx)(J.a.Label,{className:"label",children:Object(w.jsx)("h2",{children:"FirstName"})}),Object(w.jsx)("br",{}),Object(w.jsx)(J.a.Control,Object(M.a)({className:"form",type:"text",placeholder:"FirstName"},n("firstname",{required:!0}))),a.firstname&&Object(w.jsx)("span",{children:"This field is required"})]}),Object(w.jsxs)(J.a.Group,{className:"mb-3",controlId:"formBasicLastName",children:[Object(w.jsx)(J.a.Label,{className:"label",children:Object(w.jsx)("h2",{children:"LastName"})}),Object(w.jsx)("br",{}),Object(w.jsx)(J.a.Control,Object(M.a)({className:"form",type:"text",placeholder:"LastName"},n("lastname",{required:!0}))),a.lastname&&Object(w.jsx)("span",{children:"This field is required"})]}),Object(w.jsxs)(J.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(w.jsx)(J.a.Label,{className:"label",children:Object(w.jsx)("h2",{children:"Email"})}),Object(w.jsx)("br",{}),Object(w.jsx)(J.a.Control,Object(M.a)({className:"form",placeholder:"Enter email",type:"email"},n("email",{required:!0,pattern:{value:/\S+@\S+\.\S+/,message:"Entered value does not match email format"}}))),a.email&&Object(w.jsx)("span",{children:"This field is required"})]}),Object(w.jsxs)(J.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(w.jsx)(J.a.Label,{className:"label",children:Object(w.jsx)("h2",{children:"Password"})}),Object(w.jsx)("br",{}),Object(w.jsx)(J.a.Control,Object(M.a)({className:"form",type:"password",placeholder:"Password"},n("password",{required:!0}))),a.password&&Object(w.jsx)("span",{children:"This field is required"})]}),Object(w.jsx)(V.a,{className:"submit d",variant:"primary",type:"submit",children:"Submit"})]})})}function U(){var e=Object(T.h)(),t=Object(G.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;var c=v();return void 0!==c&&null!==c?(e("/"),Object(w.jsx)("p",{children:"You are logged In"})):Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:r(function(){var t=Object(f.a)(x.a.mark((function t(n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(n);case 3:r=t.sent,localStorage.setItem("token",r.data.token),e("/login"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e("/login");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),children:[Object(w.jsx)("p",{className:"announcement",children:"Compte pr\xe9d\xe9fini avec des commandes deja faites "}),Object(w.jsx)("label",{className:"label",htmlFor:"email",children:Object(w.jsx)("h2",{children:"Email"})}),Object(w.jsx)("br",{}),Object(w.jsx)("input",Object(M.a)({className:"form",type:"email",id:"email",defaultValue:"tahajotey@gmail.com"},n("email",{required:!0,pattern:{value:/\S+@\S+\.\S+/,message:"Entered value does not match email format"}}))),a.email&&Object(w.jsx)("span",{children:"This field is required"})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{className:"label",htmlFor:"password",children:Object(w.jsx)("h2",{children:"Password"})}),Object(w.jsx)("br",{}),Object(w.jsx)("input",Object(M.a)({className:"form",type:"password",defaultValue:"TikkaMassala",id:"password"},n("password",{required:!0})))," ",Object(w.jsx)("br",{}),a.password&&Object(w.jsx)("span",{children:"This field is required"})," ",Object(w.jsx)("br",{}),Object(w.jsx)("input",{className:"submit",type:"submit"})," ",Object(w.jsx)("br",{})]})})}function X(){var e=Object(T.h)();localStorage.removeItem("token"),window.location.reload(!1),e("/login")}var Y,H,K,Q=function(){return v()?Object(w.jsx)(T.b,{}):Object(w.jsx)(T.a,{to:"/login"})},W=C.b.main(Y||(Y=Object(q.a)(["\n  max-width: 140rem;\n  margin: 0 auto;\n  padding: 4rem;\n"]))),Z=function(){return Object(w.jsx)(W,{children:Object(w.jsxs)(T.e,{children:[Object(w.jsx)(T.c,{path:"/",element:Object(w.jsx)(F,{})}),Object(w.jsx)(T.c,{path:"/Register",element:Object(w.jsx)($,{})}),Object(w.jsx)(T.c,{path:"/Login",element:Object(w.jsx)(U,{})}),Object(w.jsxs)(T.c,{element:Object(w.jsx)(Q,{}),children:[Object(w.jsx)(T.c,{path:"/Orders",element:Object(w.jsx)(B,{})}),Object(w.jsx)(T.c,{path:"/Logout",element:Object(w.jsx)(X,{})})]})]})})},ee=function(e){var t=e.id,n=e.name,r=e.price,a=e.picture,c={id:t,name:n,price:r,picture:a,quantity:e.quantity},s={id:t,name:n,price:r,picture:a},o=Object(i.b)();return Object(w.jsxs)("div",{className:"itemwrap",children:[Object(w.jsx)("div",{className:"imagecontainer",children:Object(w.jsx)("img",{className:"image",src:a,alt:n})}),Object(w.jsxs)("div",{className:"details",children:[Object(w.jsx)("div",{className:"itemname",children:function(e){return e.length<=14?e:e.substr(0,14)+"..."}(n)}),Object(w.jsxs)("div",{children:["$",(c.price*c.quantity).toFixed(2)]}),Object(w.jsxs)("div",{className:"amountchange",children:[Object(w.jsx)("button",{className:"change",onClick:function(){return o(function(e){return{type:m,payload:e}}(s))},children:Object(w.jsx)(l.a,{})}),Object(w.jsx)("div",{children:c.quantity}),Object(w.jsx)("button",{className:"change",onClick:function(){return o(O(s))},children:Object(w.jsx)(l.b,{})})]})]})]})},te=C.b.div(H||(H=Object(q.a)(["\n  position: fixed;\n  z-index: 1;\n  top: 0;\n  right: -110%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4rem;\n  width: 59rem;\n  height: 100%;\n  padding: 6rem;\n  background-color: #fff;\n  font-size: 3rem;\n  transition: right 0.85s ease-in-out;\n\n  ","\n\n  @media (max-width: 480px) {\n    width: 100%;\n  }\n"])),(function(e){return e.isOpen&&Object(C.a)(K||(K=Object(q.a)(["\n      right: 0;\n    "])))})),ne=function(){var e=Object(i.c)((function(e){return e.cart})),t=Object(i.c)((function(e){return e.isCartOpen})),n=Object(i.b)(),r=e.map((function(e){return Object(w.jsx)(ee,{id:e.id,name:e.name,price:e.price,picture:e.picture,quantity:e.quantity},Object(E.a)())}));return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(te,{isOpen:t,children:[Object(w.jsx)("div",{className:"cart",children:"Your shopping cart"}),Object(w.jsx)("div",{className:"products",children:r}),Object(w.jsxs)("div",{className:"total",children:["Total: $",e.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2)]}),Object(w.jsx)("button",{className:"checkbtn",children:"Order"}),Object(w.jsx)("button",{className:"closebtn",onClick:function(){return n({type:d})},children:"Close"})]})})},re=(n(52),function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(o.a,{children:[Object(w.jsx)(S,{}),Object(w.jsx)(Z,{})]}),Object(w.jsx)(ne,{})]})}),ae=n(22),ce=n(38),se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return!0;case d:return!1;default:return e}},ie=n(9),oe=[],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(ie.a)(t.payload);default:return e}},je=[],de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n=e.find((function(e){return e.id===t.payload.id}));return n?e.map((function(e){return e.id===t.payload.id?Object(M.a)(Object(M.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(ie.a)(e),[Object(M.a)(Object(M.a)({},t.payload),{},{quantity:1})]);case m:var r=e.find((function(e){return e.id===t.payload.id}));return 1===r.quantity?e.filter((function(e){return e.id!==t.payload.id})):e.map((function(e){return e.id===t.payload.id?Object(M.a)(Object(M.a)({},e),{},{quantity:e.quantity-1}):e}));default:return e}},ue=Object(ae.b)({isCartOpen:se,products:le,cart:de}),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.c,me=Object(ae.d)(ue,be(Object(ae.a)(ce.a)));s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(i.a,{store:me,children:Object(w.jsx)(re,{})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.7b5816b8.chunk.js.map